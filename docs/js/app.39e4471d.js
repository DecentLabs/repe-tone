(function(t){function e(e){for(var s,i,o=e[0],l=e[1],c=e[2],m=0,p=[];m<o.length;m++)i=o[m],a[i]&&p.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("64a9"),a=n.n(s);a.a},"1af0":function(t,e,n){},4904:function(t,e,n){"use strict";var s=n("1af0"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("practice-scene")],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("RepeTone")]),n("h2",[t._v("Hear the sound and tell the space")]),n("div",{staticClass:"playground"},[t.started?t._e():n("button",{staticClass:"start",on:{click:t.startSession}},[t._v("start session "+t._s(t.session))]),t.started?n("div",{staticClass:"column"},[n("button",{staticClass:"play",on:{click:t.play}},[t._v("play")]),n("div",{staticClass:"row"},t._l(t.intervalAnswers,function(e){return n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],attrs:{type:"radio",name:"answer",id:e.name+"answer"},domProps:{value:e.name,checked:t._q(t.answer,e.name)},on:{change:[function(n){t.answer=e.name},t.setAnswer]}}),n("label",{attrs:{for:e.name+"answer"}},[t._v(t._s(e.label))])])}),0),n("button",{staticClass:"next",class:t.result&&"show",on:{click:t.getNext}},[t._v("next")])]):t._e(),n("button",{staticClass:"stats",on:{click:t.toggleOverlay}},[t._v("see stats")])]),n("div",{staticClass:"settings"},[n("div",{staticClass:"settings-column"},[n("h2",[t._v("direction")]),n("div",{staticClass:"column"},t._l(t.directionOptions,function(e){return n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.direction,expression:"direction"}],attrs:{type:"radio",name:"direction",id:e.id},domProps:{value:e.id,checked:t._q(t.direction,e.id)},on:{change:function(n){t.direction=e.id}}}),n("label",{attrs:{for:e.id}},[t._v(t._s(e.label))])])}),0)]),n("div",{staticClass:"settings-column"},[n("h2",[t._v("select intervals")]),n("div",{staticClass:"column"},t._l(t.intervals,function(e){return n("div",{staticClass:"input-group"},[n("input",{attrs:{type:"checkbox",id:e.name+"int"},domProps:{value:e.name,checked:t.intervalIsSelected(e.name)},on:{change:t.selectIntervals}}),n("label",{class:t.getIntervalProgress(e.name),attrs:{for:e.name+"int"}},[t._v(t._s(e.label))])])}),0)])]),n("stats-overlay",{directives:[{name:"show",rawName:"v-show",value:t.overlayVisible,expression:"overlayVisible"}],attrs:{stats:t.allStats},on:{toggleOverlay:t.toggleOverlay}})],1)},o=[],l=(n("7514"),n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlay",on:{click:t.close}},[n("div",{staticClass:"overlay-inner"},t._l(t.stats,function(e){return n("div",[n("div",[t._v(t._s(e.name))]),n("div",[t._v(t._s(e.attempts))]),n("div",[t._v(t._s(e.accuracy))])])}),0)])}),c=[],u={name:"stats-overlay",props:["stats"],methods:{close:function(){this.$emit("toggleOverlay")}}},m=u,p=(n("4904"),n("2877")),d=Object(p["a"])(m,l,c,!1,null,null,null),f=d.exports,v=[{name:"piano",notes:{A0:"A0.mp3",A1:"A1.mp3",A2:"A2.mp3",A3:"A3.mp3",A4:"A4.mp3",A5:"A5.mp3",A6:"A6.mp3","A#0":"As0.mp3","A#1":"As1.mp3","A#2":"As2.mp3","A#3":"As3.mp3","A#4":"As4.mp3","A#5":"As5.mp3","A#6":"As6.mp3",B0:"B0.mp3",B1:"B1.mp3",B2:"B2.mp3",B3:"B3.mp3",B4:"B4.mp3",B5:"B5.mp3",B6:"B6.mp3",C0:"C0.mp3",C1:"C1.mp3",C2:"C2.mp3",C3:"C3.mp3",C4:"C4.mp3",C5:"C5.mp3",C6:"C6.mp3",C7:"C7.mp3","C#0":"Cs0.mp3","C#1":"Cs1.mp3","C#2":"Cs2.mp3","C#3":"Cs3.mp3","C#4":"Cs4.mp3","C#5":"Cs5.mp3","C#6":"Cs6.mp3",D0:"D0.mp3",D1:"D1.mp3",D2:"D2.mp3",D3:"D3.mp3",D4:"D4.mp3",D5:"D5.mp3",D6:"D6.mp3","D#0":"Ds0.mp3","D#1":"Ds1.mp3","D#2":"Ds2.mp3","D#3":"Ds3.mp3","D#4":"Ds4.mp3","D#5":"Ds5.mp3","D#6":"Ds6.mp3",E0:"E0.mp3",E1:"E1.mp3",E2:"E2.mp3",E3:"E3.mp3",E4:"E4.mp3",E5:"E5.mp3",E6:"E6.mp3",F0:"F0.mp3",F1:"F1.mp3",F2:"F2.mp3",F3:"F3.mp3",F4:"F4.mp3",F5:"F5.mp3",F6:"F6.mp3","F#0":"Fs0.mp3","F#1":"Fs1.mp3","F#2":"Fs2.mp3","F#3":"Fs3.mp3","F#4":"Fs4.mp3","F#5":"Fs5.mp3","F#6":"Fs6.mp3",G0:"G0.mp3",G1:"G1.mp3",G2:"G2.mp3",G3:"G3.mp3",G4:"G4.mp3",G5:"G5.mp3",G6:"G6.mp3","G#0":"Gs0.mp3","G#1":"Gs1.mp3","G#2":"Gs2.mp3","G#3":"Gs3.mp3","G#4":"Gs4.mp3","G#5":"Gs5.mp3","G#6":"Gs6.mp3"}}],h=v.map(function(t){return t.baseUrl="/samples/".concat(t.name,"/"),t}),b=function(t){return h.find(function(e){return e.name=t})},g=n("e814"),y=n.n(g),C=n("a4bb"),_=n.n(C),A=[{name:"m2",label:"minor 2nd"},{name:"M2",label:"major 2nd"},{name:"m3",label:"minor 3rd"},{name:"M3",label:"major 3rd"},{name:"P4",label:"perfect 4th"},{name:"tri",label:"tritone"},{name:"P5",label:"perfect 5th"},{name:"m6",label:"minor 6th"},{name:"M6",label:"major 6th"},{name:"m7",label:"minor 7th"},{name:"M7",label:"major 7th"},{name:"P8",label:"octave"}],D=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],w=function(t){return A.find(function(e){return e.name===t})};function F(t){var e=b(t),n=_()(e.notes).length/12-1,s=Math.floor(Math.random()*n),a=D[Math.floor(Math.random()*D.length)];return"".concat(a).concat(s)}function G(t,e,n){var s=y()(t.slice(-1)),a=D.indexOf(t.slice(0,-1)),r=A.indexOf(w(e))+1,i=0;return"asc"===n?a+r>=12?(i=a+r-12,s++):i=a+r:a-r<0?(i=a-r+12,s--):i=a-r,"".concat(D[i]).concat(s)}n("ac6a");function O(t){var e,n=[],s="",a=0;return t.forEach(function(t){if(t.name!==s)e=1,s=t.name,a=t.found,n.push({name:s,accuracy:a/e,attempts:e});else{var r=n.find(function(t){return t.name===s});a+=t.found,e++,r.attempts=e,r.accuracy=a/e}}),console.log(n),n}function S(t){var e=0;return t.forEach(function(t){t.session>e&&(e=t.session)}),e}var x=n("bd86"),I=(n("c5f6"),n("67da")),E=n.n(I),M=n("1564"),j=n.n(M),B="question",P=Object(x["a"])({},B,{name:String,date:Date,found:Number,session:Number}),k=E()(P,{adapter:[j.a,{name:"intervals db"}]});function N(t,e){var n={name:t,session:e,found:0,date:new Date};return k.create(B,n)}function T(t,e){var n={id:t,replace:{found:e}};return k.update(B,n)}function q(){var t={sort:{name:!0}};return k.find(B,void 0,t)}function V(){var t={sort:{session:!0,name:!0}};return k.find(B,void 0,t)}function $(t){var e={sort:{name:!0},match:{session:t}};return k.find(B,void 0,e)}function R(t){return t.map(function(t){return t.good=t.attempts>10&&t.accuracy>.9,t.bad=t.attempts>10&&t.accuracy<.9,t})}var U={name:"practice-scene",components:{StatsOverlay:f},data:function(){return{sampler:null,startNote:"",intervals:A,selectedIntervals:["M3","P5"],directionOptions:[{id:"asc",label:"ascending"},{id:"desc",label:"descending"},{id:"random",label:"any direction"}],direction:"asc",answer:"",result:!1,allStats:[],sessionStats:[],session:1,sessionTotal:3,attempted:!1,counter:0,started:!1,questions:[],overlayVisible:!1,progress:[]}},computed:{intervalAnswers:function(){var t=this;return A.filter(function(e){return t.selectedIntervals.indexOf(e.name)>=0})},randomDirection:function(){var t=["asc","desc"],e=Math.floor(Math.random()*t.length);return t[e]},selectedDirection:function(){return"random"===this.direction?this.randomDirection():this.direction},intervalIsSelected:function(){var t=this;return function(e){return t.selectedIntervals.indexOf(e)>=0}},currentInterval:function(){return this.questions.length&&this.questions[this.counter]}},methods:{startSession:function(){for(var t=this,e=function(e){N(t.getRandomInterval(),t.session).then(function(n){var s=n.payload;t.questions.push(s.records[0]),e===t.sessionTotal-1&&(t.started=!0)})},n=0;n<this.sessionTotal;n++)e(n)},endSession:function(){var t=this;$(this.session).then(function(e){t.sessionStats=O(e.payload.records),t.started=!1,t.session++}),q().then(function(e){t.allStats=O(e.payload.records),t.progress=R(t.allStats)})},play:function(){var t=G(this.startNote,this.currentInterval.name,this.selectedDirection);this.sampler.triggerAttack(this.startNote,"+8n",.8),this.sampler.triggerAttack(t,"+2n",.8)},setAnswer:function(){this.result=this.answer===this.currentInterval.name;var t=this.result?1:0;this.attempted||(T(this.currentInterval.id,t).then(function(){return console.log("answer updated")}),this.attempted=!0)},getIntervalProgress:function(t){var e=this.progress.find(function(e){return e.name==t});return e&&{good:e.good,bad:e.bad}},getRandomInterval:function(){var t=Math.floor(Math.random()*this.selectedIntervals.length);return this.selectedIntervals[t]},getNext:function(){this.counter++,this.startNote=F("piano"),this.result=!1,this.answer="",this.attempted=!1,this.counter%this.sessionTotal===0&&this.endSession()},selectIntervals:function(t){var e=t.target.value;this.selectedIntervals.indexOf(e)>0?this.selectedIntervals=this.selectedIntervals.filter(function(t){return t!==e}):(this.selectedIntervals.push(e),this.stats.push({name:e,total:0,found:0,accuracy:0}))},toggleOverlay:function(){this.overlayVisible=!this.overlayVisible}},mounted:function(){var t=this,e=b("piano");this.sampler=new Tone.Sampler(e.notes,{baseUrl:e.baseUrl,release:1}),Tone.Buffer.on("load",function(){t.sampler.toMaster()}),this.startNote=F("piano"),q().then(function(e){t.allStats=O(e.payload.records),t.progress=R(t.allStats)}),V().then(function(e){t.session=e.payload.records.length&&S(e.payload.records)+1})}},J=U,H=(n("de50"),Object(p["a"])(J,i,o,!1,null,"3a140bf1",null)),z=H.exports,K={name:"app",components:{PracticeScene:z}},L=K,Q=(n("034f"),Object(p["a"])(L,a,r,!1,null,null,null)),W=Q.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(W)}}).$mount("#app")},"64a9":function(t,e,n){},b5cf:function(t,e,n){},de50:function(t,e,n){"use strict";var s=n("b5cf"),a=n.n(s);a.a}});
//# sourceMappingURL=app.39e4471d.js.map