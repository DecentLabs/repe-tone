(function(t){function e(e){for(var a,i,o=e[0],l=e[1],c=e[2],m=0,d=[];m<o.length;m++)i=o[m],s[i]&&d.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),s=n.n(a);s.a},"1af0":function(t,e,n){},4904:function(t,e,n){"use strict";var a=n("1af0"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("practice-scene")],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("RepeTone")]),n("h2",[t._v("Hear the sound and tell the space")]),n("div",{staticClass:"playground"},[t.started?n("div",{staticClass:"column"},[n("h4",[t._v("quest "+t._s(t.counter+1))]),n("button",{staticClass:"play",class:{disabled:t.loading},attrs:{disabled:t.loading},on:{click:t.play}},[t._v("play")]),n("div",{staticClass:"row"},t._l(t.intervalAnswers,function(e){return n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],attrs:{type:"radio",name:"answer",id:e.name+"answer"},domProps:{value:e.name,checked:t._q(t.answer,e.name)},on:{change:[function(n){t.answer=e.name},t.setAnswer]}}),n("label",{attrs:{for:e.name+"answer"}},[t._v(t._s(e.label))])])}),0),t.attempted&&!t.result?n("div",[t._v("it's not that, try again!")]):t._e(),t.result?n("div",[t._v("yayy, got it!")]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loader"})]):t._e()]),n("div",{staticClass:"settings"},[n("div",{staticClass:"settings-column"},[n("h2",[t._v("set direction")]),n("div",{staticClass:"column"},t._l(t.directionOptions,function(e){return n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.direction,expression:"direction"}],attrs:{type:"radio",name:"direction",id:e.id},domProps:{value:e.id,checked:t._q(t.direction,e.id)},on:{change:function(n){t.direction=e.id}}}),n("label",{attrs:{for:e.id}},[t._v(t._s(e.label))])])}),0)]),n("div",{staticClass:"settings-column"},[t._m(0),n("div",{staticClass:"column"},t._l(t.intervals,function(e){return n("div",{staticClass:"input-group"},[n("input",{attrs:{type:"checkbox",id:e.name+"int"},domProps:{value:e.name,checked:t.intervalIsSelected(e.name)},on:{change:t.selectIntervals}}),n("label",{class:t.getIntervalProgress(e.name),attrs:{for:e.name+"int"}},[t._v(t._s(e.label))])])}),0)])]),n("stats-overlay",{directives:[{name:"show",rawName:"v-show",value:t.overlayVisible,expression:"overlayVisible"}],attrs:{stats:t.allStats},on:{toggleOverlay:t.toggleOverlay}})],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[t._v("select intervals "),n("span",[t._v("(min. 2)")])])}],l=(n("7514"),n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlay",on:{click:t.close}},[n("div",{staticClass:"overlay-inner"},[n("h2",[t._v("Your statistics")]),n("div",{staticClass:"stats"},[t._m(0),t._l(t.stats,function(e){return n("div",{staticClass:"stat-col"},[n("div",[t._v(t._s(e.name))]),n("div",[t._v(t._s(e.attempts))]),n("div",[t._v(t._s(e.accuracy))])])})],2)])])}),c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stat-col"},[n("div",[t._v("Interval")]),n("div",[t._v("Attempts")]),n("div",[t._v("Accuracy")])])}],u={name:"stats-overlay",props:["stats"],methods:{close:function(){this.$emit("toggleOverlay")}}},m=u,d=(n("4904"),n("2877")),p=Object(d["a"])(m,l,c,!1,null,null,null),v=p.exports,f=[{name:"piano",notes:{A0:"A0.mp3",A1:"A1.mp3",A2:"A2.mp3",A3:"A3.mp3",A4:"A4.mp3",A5:"A5.mp3",A6:"A6.mp3","A#0":"As0.mp3","A#1":"As1.mp3","A#2":"As2.mp3","A#3":"As3.mp3","A#4":"As4.mp3","A#5":"As5.mp3","A#6":"As6.mp3",B0:"B0.mp3",B1:"B1.mp3",B2:"B2.mp3",B3:"B3.mp3",B4:"B4.mp3",B5:"B5.mp3",B6:"B6.mp3",C0:"C0.mp3",C1:"C1.mp3",C2:"C2.mp3",C3:"C3.mp3",C4:"C4.mp3",C5:"C5.mp3",C6:"C6.mp3",C7:"C7.mp3","C#0":"Cs0.mp3","C#1":"Cs1.mp3","C#2":"Cs2.mp3","C#3":"Cs3.mp3","C#4":"Cs4.mp3","C#5":"Cs5.mp3","C#6":"Cs6.mp3",D0:"D0.mp3",D1:"D1.mp3",D2:"D2.mp3",D3:"D3.mp3",D4:"D4.mp3",D5:"D5.mp3",D6:"D6.mp3","D#0":"Ds0.mp3","D#1":"Ds1.mp3","D#2":"Ds2.mp3","D#3":"Ds3.mp3","D#4":"Ds4.mp3","D#5":"Ds5.mp3","D#6":"Ds6.mp3",E0:"E0.mp3",E1:"E1.mp3",E2:"E2.mp3",E3:"E3.mp3",E4:"E4.mp3",E5:"E5.mp3",E6:"E6.mp3",F0:"F0.mp3",F1:"F1.mp3",F2:"F2.mp3",F3:"F3.mp3",F4:"F4.mp3",F5:"F5.mp3",F6:"F6.mp3","F#0":"Fs0.mp3","F#1":"Fs1.mp3","F#2":"Fs2.mp3","F#3":"Fs3.mp3","F#4":"Fs4.mp3","F#5":"Fs5.mp3","F#6":"Fs6.mp3",G0:"G0.mp3",G1:"G1.mp3",G2:"G2.mp3",G3:"G3.mp3",G4:"G4.mp3",G5:"G5.mp3",G6:"G6.mp3","G#0":"Gs0.mp3","G#1":"Gs1.mp3","G#2":"Gs2.mp3","G#3":"Gs3.mp3","G#4":"Gs4.mp3","G#5":"Gs5.mp3","G#6":"Gs6.mp3"}}],h=f.map(function(t){return t.baseUrl="./samples/".concat(t.name,"/"),t}),g=function(t){return h.find(function(e){return e.name=t})},b=n("e814"),_=n.n(b),y=n("a4bb"),C=n.n(y),A=[{name:"m2",label:"minor 2nd"},{name:"M2",label:"major 2nd"},{name:"m3",label:"minor 3rd"},{name:"M3",label:"major 3rd"},{name:"P4",label:"perfect 4th"},{name:"tri",label:"tritone"},{name:"P5",label:"perfect 5th"},{name:"m6",label:"minor 6th"},{name:"M6",label:"major 6th"},{name:"m7",label:"minor 7th"},{name:"M7",label:"major 7th"},{name:"P8",label:"octave"}],D=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],w=function(t){return A.find(function(e){return e.name===t})};function F(t){var e=g(t),n=C()(e.notes).length/12-1,a=Math.floor(Math.random()*n),s=D[Math.floor(Math.random()*D.length)];return"".concat(s).concat(a)}function G(t,e,n){var a=_()(t.slice(-1)),s=D.indexOf(t.slice(0,-1)),r=A.indexOf(w(e))+1,i=0;return"asc"===n?s+r>=12?(i=s+r-12,a++):i=s+r:s-r<0?(i=s-r+12,a--):i=s-r,"".concat(D[i]).concat(a)}n("ac6a");function I(t){var e,n=[],a="",s=0;return t.forEach(function(t){if(t.name!==a)e=1,a=t.name,s=t.found,n.push({name:a,accuracy:0,attempts:e});else{var r=n.find(function(t){return t.name===a});s+=t.found,e++,e<=10&&(r.accuracy=s/e),r.attempts=e}}),n}var O=n("bd86"),x=(n("c5f6"),n("67da")),E=n.n(x),S=n("1564"),M=n.n(S),j="question",B=Object(O["a"])({},j,{name:String,date:Date,found:Number,session:Number}),P=E()(B,{adapter:[M.a,{name:"intervals db"}]});function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={name:t,session:e,found:0,date:new Date};return P.create(j,n)}function k(t,e){var n={id:t,replace:{found:e}};return P.update(j,n)}function T(){var t={sort:{name:!0,date:!1}};return P.find(j,void 0,t)}function $(t){return P.delete(j,t)}n("55dd");function Q(t){return t.map(function(t){var e=t.attempts>10&&t.accuracy>=.9,n=t.attempts>10&&t.accuracy<.9;return{name:t.name,good:e,bad:n}})}var q={name:"practice-scene",components:{StatsOverlay:v},data:function(){return{sampler:null,instrument:"piano",startNote:"",intervals:A,selectedIntervals:["M3","P5"],directionOptions:[{id:"asc",label:"ascending"},{id:"desc",label:"descending"},{id:"random",label:"any direction"}],direction:"asc",currentInterval:null,answer:"",result:!1,allStats:[],sessionStats:[],session:1,sessionTotal:3,attempted:!1,counter:0,started:!0,questions:[],overlayVisible:!1,progress:[],loading:!1}},computed:{intervalAnswers:function(){var t=this;return A.filter(function(e){return t.selectedIntervals.indexOf(e.name)>=0})},randomDirection:function(){var t=["asc","desc"],e=Math.floor(Math.random()*t.length);return t[e]},selectedDirection:function(){return"random"===this.direction?this.randomDirection():this.direction},intervalIsSelected:function(){var t=this;return function(e){return t.selectedIntervals.indexOf(e)>=0}}},methods:{play:function(){var t=G(this.startNote,this.currentInterval.name,this.selectedDirection);this.sampler.triggerAttack(this.startNote,"+8n",.8),this.sampler.triggerAttack(t,"+2n",.8)},addQuestion:function(){var t=this;this.loading=!0,setTimeout(function(){N(t.getRandomInterval()).then(function(e){var n=e.payload;t.currentInterval=n.records[0],t.loading=!1})},1e3)},resetQuestion:function(){var t=this;$(this.currentInterval.id).then(function(){t.addQuestion()})},updateStats:function(){var t=this;return T().then(function(e){var n=e.payload;t.allStats=I(n.records),t.progress=Q(t.allStats)})},setAnswer:function(){var t=this;this.result=this.answer===this.currentInterval.name;var e=this.result?1:0;this.attempted||(this.attempted=!0,k(this.currentInterval.id,e).then(function(){t.updateStats()})),this.result&&this.getNext()},getIntervalProgress:function(t){var e=this.progress.find(function(e){return e.name===t});return e?{good:e.good,bad:e.bad}:{good:!1,bad:!1}},getRandomInterval:function(){var t=Math.floor(Math.random()*this.selectedIntervals.length);return this.selectedIntervals[t]},getNext:function(){this.counter++,this.startNote=F("piano"),this.result=!1,this.answer="",this.attempted=!1,this.addQuestion()},selectIntervals:function(t){var e=t.target.value;this.selectedIntervals.length>2&&this.selectedIntervals.indexOf(e)>=0?this.selectedIntervals=this.selectedIntervals.filter(function(t){return t!==e}):this.selectedIntervals.push(e),this.updateStats(),this.resetQuestion()},toggleOverlay:function(){this.overlayVisible=!this.overlayVisible}},mounted:function(){var t=this,e=g(this.instrument);this.sampler=new Tone.Sampler(e.notes,{baseUrl:e.baseUrl,release:1}),Tone.Buffer.on("load",function(){t.sampler.toMaster()}),this.startNote=F("piano"),this.updateStats(),this.addQuestion()}},V=q,R=(n("7330"),Object(d["a"])(V,i,o,!1,null,"3ca086e2",null)),U=R.exports,J={name:"app",components:{PracticeScene:U}},H=J,Y=(n("034f"),Object(d["a"])(H,s,r,!1,null,null,null)),z=Y.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(z)}}).$mount("#app")},"64a9":function(t,e,n){},7330:function(t,e,n){"use strict";var a=n("df1d"),s=n.n(a);s.a},df1d:function(t,e,n){}});
//# sourceMappingURL=app.71fad058.js.map